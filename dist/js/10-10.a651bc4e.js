(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{551:function(e,t,n){},552:function(e,t,n){"use strict";var a=n(2),p=n.n(a),i=n(6),r=n.n(i),o=n(9),l=n.n(o),s=n(5),c=n.n(s),u=n(7),f=n.n(u),m=n(1),d=n(14),v=n(49),b=n(10),h=n(21),y=n(33),g=n(50),E=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&(n[a[i]]=e[a[i]])}return n},w=function(e){function t(e){r()(this,t);var u=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.onConfirm=function(e){u.setVisible(!1,e);var t=u.props.onConfirm;t&&t.call(u,e)},u.onCancel=function(e){u.setVisible(!1,e);var t=u.props.onCancel;t&&t.call(u,e)},u.onVisibleChange=function(e){u.setVisible(e)},u.saveTooltip=function(e){u.tooltip=e},u.renderOverlay=function(e){var t=u.props,n=t.prefixCls,a=t.okButtonProps,i=t.cancelButtonProps,r=t.title,o=t.cancelText,l=t.okText,s=t.okType,c=t.icon;return m.createElement("div",null,m.createElement("div",{className:n+"-inner-content"},m.createElement("div",{className:n+"-message"},c,m.createElement("div",{className:n+"-message-title"},r)),m.createElement("div",{className:n+"-buttons"},m.createElement(h.a,p()({onClick:u.onCancel,size:"small"},i),o||e.cancelText),m.createElement(h.a,p()({onClick:u.onConfirm,type:s,size:"small"},a),l||e.okText))))},u.state={visible:e.visible},u}return f()(t,e),l()(t,[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var n=this.props;"visible"in n||this.setState({visible:e});var a=n.onVisibleChange;a&&a(e,t)}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,n=e.placement,a=E(e,["prefixCls","placement"]),i=m.createElement(y.a,{componentName:"Popconfirm",defaultLocale:g.a.Popconfirm},this.renderOverlay);return m.createElement(v.a,p()({},a,{prefixCls:t,placement:n,onVisibleChange:this.onVisibleChange,visible:this.state.visible,overlay:i,ref:this.saveTooltip}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}]),t}(m.Component);w.defaultProps={prefixCls:"ant-popover",transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:m.createElement(b.a,{type:"exclamation-circle",theme:"filled"})},Object(d.polyfill)(w),t.a=w},553:function(e,t,n){"use strict";n(24),n(551),n(47)},637:function(e,t,n){},638:function(e,t,n){e.exports={style:"_1T2j4Aj8Rkwg8IFqvaX7NX"}},651:function(e,t,n){"use strict";n.r(t);n(98);var l=n(54),s=(n(553),n(552)),c=(n(166),n(100)),u=(n(96),n(53)),p=(n(47),n(21)),r=(n(42),n(10)),o=(n(362),n(178)),f=(n(48),n(20)),m=(n(97),n(34)),a=n(1),d=n.n(a),v=n(169),b=n(29),h=n(66),y=(n(574),n(571)),i=(n(83),n(40)),g=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}localStorage.getItem("token");function w(e){return"image/jpeg"===e.type||i.a.error("你只能上传jpgf格式图片!"),e.size/1024/1024<2||i.a.error("图片大小必须小于2M!"),!1}n(637);var k=function(e){function o(){var e,t,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=i=E(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(a)))).state={imageUrl:i.props.imageUrl||"",previewVisible:!1,previewImage:i.props.imageUrl,fileList:[{uid:"-1",name:i.props.name||"logo",status:"done",url:i.props.imageUrl}]},i.handleChange=function(e){var t,n,a;"removed"===e.file.status?i.setState({imageUrl:""}):(t=e.file,n=function(e){i.props.onChange(e),i.setState({imageUrl:e,loading:!1})},(a=new FileReader).addEventListener("load",function(){return n(a.result)}),a.readAsDataURL(t)),i.setState({fileList:e.fileList})},i.handlePreview=function(e){i.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},i.handleCancel=function(){return i.setState({previewVisible:!1})},E(i,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a["Component"]),g(o,[{key:"render",value:function(){var e=d.a.createElement("div",null,d.a.createElement(r.a,{type:"plus"}),d.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.state,n=t.previewVisible,a=t.previewImage,i=t.fileList;return d.a.createElement("div",null,d.a.createElement(y.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",beforeUpload:w,onPreview:this.handlePreview,onChange:this.handleChange,fileList:i},1<=i.length?null:e),",",d.a.createElement(u.a,{visible:n,footer:null,onCancel:this.handleCancel},d.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),o}(),C=n(117),O=n.n(C),S=n(638),j=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=m.a.Item,N=function(e){var t=e.l,n=e.r,a=e.type,i=e.isEdit,r=e.tip,o=e.onChange,l=["logo","favicon"].includes(a),s=["title","name","tel","author","copyright"].includes(a);return d.a.createElement("div",{className:"row"},d.a.createElement("span",{className:"col-l"},t,"："),d.a.createElement("div",{className:"col-r"},i?l?d.a.createElement(k,{name:a,onChange:function(e){return o(a,e)},imageUrl:n}):s?d.a.createElement(f.a,{onChange:function(e){return o(a,e)},defaultValue:n,placeholder:t}):d.a.createElement(f.a.TextArea,{onChange:function(e){return o(a,e)},defaultValue:n,placeholder:t,autosize:{minRows:2,maxRows:6}}):l?d.a.createElement("span",{className:"image"},d.a.createElement("img",{src:n})):n),i&&d.a.createElement("div",{className:"tip"},"*",r))},T=function(e){var t=e.links,n=e.onEditLinks,a=e.onDelete,i=e.isEdit;return d.a.createElement("div",{className:"row"},d.a.createElement("p",{className:"col-l"},"友情链接："),d.a.createElement("div",{className:"col-r"},t.map(function(e){return d.a.createElement(o.a,{key:e._id+"_"+e.name,closable:i,onClose:a,onClick:function(){return n("edit",e)}},e.name)}),i&&d.a.createElement(o.a,{onClick:function(){return n("add")},style:{background:"#fff",borderStyle:"dashed"}},d.a.createElement(r.a,{type:"plus"})," New Tag")))},L=m.a.create()(function(e){var t=e.form,n=e.isEdit,a=e.onClose,i=e.link,r=void 0===i?{}:i,o=e.onLinkSave,l={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},s=t.getFieldDecorator;return d.a.createElement(m.a,{onSubmit:function(e){e.preventDefault(),t.validateFields(function(e,t){e||(o(r._id||"",t),a())})}},d.a.createElement(_,x({},l,{label:"网站名称"}),s("name",{rules:[{required:!0,message:"链接呢称!"}],initialValue:r?r.name:""})(d.a.createElement(f.a,{disabled:!n,style:{width:250,marginLeft:20},placeholder:"链接呢称"}))),d.a.createElement(_,x({},l,{label:"网站地址"}),s("url",{rules:[{required:!0,message:"请输入网站地址!"}],initialValue:r?r.url:""})(d.a.createElement(f.a,{disabled:!n,style:{width:250,marginLeft:20},placeholder:"网站地址"}))),n&&d.a.createElement("div",{className:"submit-btn"},d.a.createElement(p.a,{htmlType:"submit"},r.name?"修 改":"添 加")))}),V=function(e){function r(){var e,t,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=o=P(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(a)))).state={webInfo:{logo:O.a,favicon:O.a,title:"",keywords:"",description:"",author:"@",name:"",tel:"",address:"",copyright:"",links:[{url:"www.baidu.com",name:"百度"}]},isEdit:!1,loading:!1},o.getWebInfo=function(){o.setState({loading:!0}),Object(v.a)().then(function(e){o.setState({loading:!1,webInfo:e.data})}).catch(function(e){o.setState({loading:!1})})},o.onLinkSave=function(t,n){var e=o.state.webInfo,a=e.links.slice();if(t)a.map(function(e){return e.id===t?x({},e,n):e});else{if(0<a.filter(function(e){return e.name==n.name}).length)return void message.info("添加链接已存在！");a.push(x({},n))}o.setState({webInfo:x({},e,{links:a})})},o.onEditLinks=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n="add"===e,a=u.a.info({title:n?"添加链接":"链接编辑",iconType:"share-alt",okText:"取  消",width:500,className:"linksModal",content:d.a.createElement(L,{isEdit:o.state.isEdit,onClose:function(){a.destroy()},link:t,onLinkSave:o.onLinkSave})})},o.onDelete=function(t){var e=o.state.links.filter(function(e){return e.name!==t});o.setState({links:e})},o.onEdit=function(){o.setState({isEdit:!o.state.isEdit})},o.onChange=function(e,t){var n,a,i,r=["favicon","logo"].includes(e)?t:t.target.value;o.setState({webInfo:x({},o.state.webInfo,(n={},a=e,i=r,a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n))})},o.onSave=function(){var e=o.state.webInfo;Object(v.d)({data:e}).then(function(e){}),o.setState({isEdit:!1})},P(o,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a["Component"]),j(r,[{key:"componentDidMount",value:function(){this.getWebInfo()}},{key:"render",value:function(){var t=this,e=this.state,n=e.webInfo,a=e.isEdit,i=e.loading,r=n.links,o=function(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(n,["links"]);return d.a.createElement(l.a,{spinning:i},d.a.createElement(h.a,{title:"基本设置"}),d.a.createElement("div",{className:S.style},b.g.map(function(e){return d.a.createElement(N,{key:e.key,l:e.name,r:o[e.key],type:e.key,tip:e.tip,onChange:t.onChange,isEdit:a})}),d.a.createElement(h.a,{title:"SEO设置"}),b.h.map(function(e){return d.a.createElement(N,{key:e.key,l:e.name,r:o[e.key],type:e.key,tip:e.tip,onChange:t.onChange,isEdit:a})}),d.a.createElement(T,{isEdit:a,links:r,onEditLinks:this.onEditLinks,onDelete:this.onDelete}),d.a.createElement(c.a,null),d.a.createElement(p.a,{style:{margin:"0 20px"},type:"primary",onClick:this.onEdit},a?"取  消":"编  辑"),a&&d.a.createElement(s.a,{placement:"top",title:"确认保存修改的信息吗？",onConfirm:this.onSave,okText:"保存",cancelText:"取消"},d.a.createElement(p.a,{type:"primary"},"保  存"))))}}]),r}();t.default=V}}]);