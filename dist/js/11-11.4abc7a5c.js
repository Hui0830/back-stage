(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{639:function(e,t,n){},680:function(e,t,n){e.exports={style:"_1T2j4Aj8Rkwg8IFqvaX7NX"}},701:function(e,t,n){"use strict";n.r(t);n(107);var a=n(61),r=(n(604),n(603)),i=(n(178),n(109)),l=(n(106),n(58)),o=(n(50),n(21)),s=(n(45),n(11)),c=(n(381),n(189)),u=(n(51),n(19)),m=(n(105),n(36)),f=n(1),p=n.n(f),d=n(181),b=n(30),_=n(70),N=(n(691),n(689)),h=(n(92),n(42)),g="/lwh/mycode/back-stage/src/components/upload_avatar/index.jsx",v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}localStorage.getItem("token");function E(e){return"image/jpeg"===e.type||h.a.error("你只能上传jpgf格式图片!"),e.size/1024/1024<2||h.a.error("图片大小必须小于2M!"),!1}n(639);var w=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=a=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={imageUrl:a.props.imageUrl||"",previewVisible:!1,previewImage:a.props.imageUrl,fileList:[{uid:"-1",name:a.props.name||"logo",status:"done",url:a.props.imageUrl}]},a.handleChange=function(e){"removed"===e.file.status?a.setState({imageUrl:""}):function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}(e.file,function(e){a.props.onChange(e),a.setState({imageUrl:e,loading:!1})}),a.setState({fileList:e.fileList})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.handleCancel=function(){return a.setState({previewVisible:!1})},y(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f["Component"]),v(t,[{key:"render",value:function(){var e=p.a.createElement("div",{__source:{fileName:g,lineNumber:66}},p.a.createElement(s.a,{type:"plus",__source:{fileName:g,lineNumber:67}}),p.a.createElement("div",{className:"ant-upload-text",__source:{fileName:g,lineNumber:68}},"Upload")),t=this.state,n=t.previewVisible,a=t.previewImage,r=t.fileList;return p.a.createElement("div",{__source:{fileName:g,lineNumber:73}},p.a.createElement(N.a,{name:"avatar",listType:"picture-card",className:"avatar-uploader",beforeUpload:E,onPreview:this.handlePreview,onChange:this.handleChange,fileList:r,__source:{fileName:g,lineNumber:74}},r.length>=1?null:e),",",p.a.createElement(l.a,{visible:n,footer:null,onCancel:this.handleCancel,__source:{fileName:g,lineNumber:85}},p.a.createElement("img",{alt:"example",style:{width:"100%"},src:a,__source:{fileName:g,lineNumber:86}})))}}]),t}(),k=n(126),C=n.n(k),O=n(680),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x="/lwh/mycode/back-stage/src/pages/website/seo/index.jsx";function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=m.a.Item,P=function(e){var t=e.l,n=e.r,a=e.type,r=e.isEdit,i=e.tip,l=e.onChange,o=["logo","favicon"].includes(a),s=["title","name","tel","author","copyright"].includes(a);return p.a.createElement("div",{className:"row",__source:{fileName:x,lineNumber:19}},p.a.createElement("span",{className:"col-l",__source:{fileName:x,lineNumber:20}},t,"："),p.a.createElement("div",{className:"col-r",__source:{fileName:x,lineNumber:21}},r?o?p.a.createElement(w,{name:a,onChange:function(e){return l(a,e)},imageUrl:n,__source:{fileName:x,lineNumber:25}}):s?p.a.createElement(u.a,{onChange:function(e){return l(a,e)},defaultValue:n,placeholder:t,__source:{fileName:x,lineNumber:27}}):p.a.createElement(u.a.TextArea,{onChange:function(e){return l(a,e)},defaultValue:n,placeholder:t,autosize:{minRows:2,maxRows:6},__source:{fileName:x,lineNumber:28}}):o?p.a.createElement("span",{className:"image",__source:{fileName:x,lineNumber:31}},p.a.createElement("img",{src:n,__source:{fileName:x,lineNumber:31}})):n),r&&p.a.createElement("div",{className:"tip",__source:{fileName:x,lineNumber:34}},"*",i))},T=function(e){var t=e.links,n=e.onEditLinks,a=e.onDelete,r=e.isEdit;return p.a.createElement("div",{className:"row",__source:{fileName:x,lineNumber:40}},p.a.createElement("p",{className:"col-l",__source:{fileName:x,lineNumber:41}},"友情链接："),p.a.createElement("div",{className:"col-r",__source:{fileName:x,lineNumber:42}},t.map(function(e){return p.a.createElement(c.a,{key:e._id+"_"+e.name,closable:r,onClose:a,onClick:function(){return n("edit",e)},__source:{fileName:x,lineNumber:46}},e.name)}),r&&p.a.createElement(c.a,{onClick:function(){return n("add")},style:{background:"#fff",borderStyle:"dashed"},__source:{fileName:x,lineNumber:54}},p.a.createElement(s.a,{type:"plus",__source:{fileName:x,lineNumber:58}})," New Tag")))},U=m.a.create()(function(e){var t=e.form,n=e.isEdit,a=e.onClose,r=e.link,i=void 0===r?{}:r,l=e.onLinkSave,s={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},c=t.getFieldDecorator;return p.a.createElement(m.a,{onSubmit:function(e){e.preventDefault(),t.validateFields(function(e,t){e||(l(i._id||"",t),a())})},__source:{fileName:x,lineNumber:87}},p.a.createElement(I,j({},s,{label:"网站名称",__source:{fileName:x,lineNumber:88}}),c("name",{rules:[{required:!0,message:"链接呢称!"}],initialValue:i?i.name:""})(p.a.createElement(u.a,{disabled:!n,style:{width:250,marginLeft:20},placeholder:"链接呢称",__source:{fileName:x,lineNumber:96}}))),p.a.createElement(I,j({},s,{label:"网站地址",__source:{fileName:x,lineNumber:99}}),c("url",{rules:[{required:!0,message:"请输入网站地址!"}],initialValue:i?i.url:""})(p.a.createElement(u.a,{disabled:!n,style:{width:250,marginLeft:20},placeholder:"网站地址",__source:{fileName:x,lineNumber:107}}))),n&&p.a.createElement("div",{className:"submit-btn",__source:{fileName:x,lineNumber:110}},p.a.createElement(o.a,{htmlType:"submit",__source:{fileName:x,lineNumber:111}},i.name?"修 改":"添 加")))}),D=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=L(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={webInfo:{logo:C.a,favicon:C.a,title:"",keywords:"",description:"",author:"@",name:"",tel:"",address:"",copyright:"",links:[{url:"www.baidu.com",name:"百度"}]},isEdit:!1,loading:!1},a.getWebInfo=function(){a.setState({loading:!0}),Object(d.a)().then(function(e){a.setState({loading:!1,webInfo:e.data})}).catch(function(e){a.setState({loading:!1})})},a.onLinkSave=function(e,t){var n=a.state.webInfo,r=n.links.slice();if(e)r.map(function(n){return n.id===e?j({},n,t):n});else{if(r.filter(function(e){return e.name==t.name}).length>0)return void message.info("添加链接已存在！");r.push(j({},t))}a.setState({webInfo:j({},n,{links:r})})},a.onEditLinks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="add"===e,r=l.a.info({title:n?"添加链接":"链接编辑",iconType:"share-alt",okText:"取  消",width:500,className:"linksModal",content:p.a.createElement(U,{isEdit:a.state.isEdit,onClose:function(){!function(e){e.destroy()}(r)},link:t,onLinkSave:a.onLinkSave,__source:{fileName:x,lineNumber:205}})})},a.onDelete=function(e){var t=a.state.links.filter(function(t){return t.name!==e});a.setState({links:t})},a.onEdit=function(){a.setState({isEdit:!a.state.isEdit})},a.onChange=function(e,t){var n=["favicon","logo"].includes(e)?t:t.target.value;a.setState({webInfo:j({},a.state.webInfo,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n))})},a.onSave=function(){var e=a.state.webInfo;Object(d.d)({data:e}).then(function(e){console.log("更新网站基本数据",e)}),a.setState({isEdit:!1})},L(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f["Component"]),S(t,[{key:"componentDidMount",value:function(){this.getWebInfo()}},{key:"render",value:function(){var e=this,t=this.state,n=t.webInfo,l=t.isEdit,s=t.loading,c=n.links,u=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(n,["links"]);return p.a.createElement(a.a,{spinning:s,__source:{fileName:x,lineNumber:243}},p.a.createElement(_.a,{title:"基本设置",__source:{fileName:x,lineNumber:244}}),p.a.createElement("div",{className:O.style,__source:{fileName:x,lineNumber:245}},b.g.map(function(t){return p.a.createElement(P,{key:t.key,l:t.name,r:u[t.key],type:t.key,tip:t.tip,onChange:e.onChange,isEdit:l,__source:{fileName:x,lineNumber:248}})}),p.a.createElement(_.a,{title:"SEO设置",__source:{fileName:x,lineNumber:257}}),b.h.map(function(t){return p.a.createElement(P,{key:t.key,l:t.name,r:u[t.key],type:t.key,tip:t.tip,onChange:e.onChange,isEdit:l,__source:{fileName:x,lineNumber:260}})}),p.a.createElement(T,{isEdit:l,links:c,onEditLinks:this.onEditLinks,onDelete:this.onDelete,__source:{fileName:x,lineNumber:269}}),p.a.createElement(i.a,{__source:{fileName:x,lineNumber:270}}),p.a.createElement(o.a,{style:{margin:"0 20px"},type:"primary",onClick:this.onEdit,__source:{fileName:x,lineNumber:271}},l?"取  消":"编  辑"),l&&p.a.createElement(r.a,{placement:"top",title:"确认保存修改的信息吗？",onConfirm:this.onSave,okText:"保存",cancelText:"取消",__source:{fileName:x,lineNumber:274}},p.a.createElement(o.a,{type:"primary",__source:{fileName:x,lineNumber:275}},"保  存"))))}}]),t}();t.default=D}}]);