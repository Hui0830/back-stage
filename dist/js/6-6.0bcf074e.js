(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{575:function(e,t,a){e.exports={style:"SZ3FUJ-q1cOQOboc_6T4"}},576:function(e,t,a){},652:function(e,t,a){"use strict";a.r(t);a(359);var i=a(177),n=a(1),l=a.n(n),r=a(17),c=a(118),s=(a(47),a(21)),f=(a(48),a(20)),u=(a(42),a(10)),p=(a(84),a(36)),o=a(575),d=a.n(o),h=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();var y=p.a.Option,m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelectChange=function(e){n.setState({filterId:e})},n.onKeywordChange=function(e){n.setState({keyWord:e.target.value})},n.onSearch=function(){var e=n.state,t=e.keyWord,a=e.filterId;n.props.onSearch({keyWord:t,roleId:a})},n.state={keyWord:"",filterId:"all"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["PureComponent"]),h(t,[{key:"render",value:function(){var t=this,e=this.props,a=e.lable,n=e.filterData,r=e.searchTip,o=this.state,i=o.keyWord,c=o.filterId;return l.a.createElement("nav",{className:d.a.style},l.a.createElement("div",{className:"select-filter"},l.a.createElement("span",null,"选择",a,"："),l.a.createElement(p.a,{onChange:function(e){return t.onSelectChange(e)},className:"select-container",defaultValue:"all",value:c,placeholder:"全部"+a,style:{flex:1}},[{filterId:"all",filterTip:"全部角色"}].concat(n).map(function(e){return l.a.createElement(y,{key:e.filterId,value:e.filterId},e.filterTip)}))),l.a.createElement("div",{className:"search-container"},l.a.createElement(f.a,{placeholder:r,className:"search-input",prefix:l.a.createElement(u.a,{type:"search",className:"prefix-icon"}),value:i,onChange:this.onKeywordChange,onPressEnter:function(){return t.onSearch()}}),l.a.createElement(s.a,{type:"primary",ghost:!0,onClick:function(){return t.onSearch()}},"搜索")))}}]),t}(),b=a(99),g=a(29),S=a(140),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},O=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function w(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}a(576);var _=[{title:"系统账号(手机号)",dataIndex:"account",className:"staff-td"},{title:"姓名",dataIndex:"name",key:"name_id",className:"staff-td"},{title:"职位",dataIndex:"roles",className:"staff-td",render:function(e){return e.roleName}},{title:"联系方式",dataIndex:"email",className:"staff-td"},{title:"添加时间",dataIndex:"time",className:"staff-td",render:function(e){return Object(b.a)(e).fullTime}},{key:"_id",title:"操作",className:"staff-td",render:function(e){return l.a.createElement("div",{className:"action"},Object(S.b)("staff_edit")&&Object(S.a)(e.roles.roleId)&&l.a.createElement(r.Link,{to:"/staff/edit/"+e._id,className:"outline-btn edit-a"},"编辑"),Object(S.b)("staff_info")&&l.a.createElement(r.Link,{to:"/staff/user/"+e._id,className:"btn-style search-a"},"查看"))}}],E={filterData:g.e.map(function(e){return{filterId:e.roleId,filterTip:e.roleName}}),lable:"角色",searchTip:"输入用户名或手机号"},j=function(e){function o(){var e,t,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var a=arguments.length,n=Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=u=k(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(n)))).state={dataSource:[],current:1,pageSize:4,total:0,search:{}},u.onSearch=function(e){var t=e.keyWord,a=e.roleId,n={keyWord:t,roleId:a};JSON.stringify(n)!==JSON.stringify(u.state.search)&&u.setState({search:{keyWord:t,roleId:a},dataSource:[]},function(){u.getStaffList(1,n)})},u.getStaffList=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=u.state,f=a.dataSource,n=a.pageSize;Object(c.c)({page:e,pageSize:n,search:t}).then(function(e){var t,a,n=e.data,r=n.data,o=n.pageConfig,i=o.total,c=o.current,l=o.pageSize,s=void 0;f.length!=i?(t=s=new Array(i)).splice.apply(t,[(c-1)*l,l].concat(w(r))):(a=s=f.slice()).splice.apply(a,[(c-1)*l,l].concat(w(r)));u.setState({dataSource:s,total:i,current:c,pageSize:l})})},u.onPageChange=function(e,t){u.state.dataSource[(e-1)*t]?u.setState({current:e}):u.getStaffList(e)},k(u,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n["PureComponent"]),O(o,[{key:"componentDidMount",value:function(){this.getStaffList()}},{key:"render",value:function(){var e=this.state,t=e.dataSource,a=e.current,n=e.total,r=e.pageSize;return[l.a.createElement(m,v({key:"FilterSearch"},E,{onSearch:this.onSearch})),l.a.createElement(i.a,{key:"Table",rowKey:"key",dataSource:t,columns:_,pagination:{current:a,total:n,pageSize:r,onChange:this.onPageChange,hideOnSinglePage:!0}})]}}]),o}();t.default=j}}]);