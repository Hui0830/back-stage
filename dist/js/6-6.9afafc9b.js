(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{113:function(e,t,n){},114:function(e,t,n){e.exports=n(5)(573)},115:function(e,t,n){"use strict";n(6),n(113),n(12)},120:function(e,t,n){e.exports=n(5)(234)},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){e.exports=n(5)(627)},140:function(e,t,n){},141:function(e,t,n){e.exports={style:"_1T2j4Aj8Rkwg8IFqvaX7NX"}},158:function(e,t,n){"use strict";n.r(t);n(30);var a=n(32),r=(n(115),n(114)),i=(n(48),n(33)),l=(n(29),n(15)),o=(n(12),n(8)),u=(n(11),n(2)),c=(n(79),n(120)),s=(n(13),n(4)),f=(n(28),n(9)),m=n(0),d=n.n(m),p=n(51),b=n(7),_=n(17),N=(n(6),n(137),n(138),n(34),n(139)),h=(n(22),n(10)),g="/lwh/mycode/back-stage/src/components/upload_avatar/index.jsx",v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}localStorage.getItem("token");function E(e){return"image/jpeg"===e.type||h.default.error("你只能上传jpgf格式图片!"),e.size/1024/1024<2||h.default.error("图片大小必须小于2M!"),!1}n(140);var w=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=a=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={imageUrl:a.props.imageUrl||"",previewVisible:!1,previewImage:a.props.imageUrl,fileList:[{uid:"-1",name:a.props.name||"logo",status:"done",url:a.props.imageUrl}]},a.handleChange=function(e){"removed"===e.file.status?a.setState({imageUrl:""}):function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}(e.file,function(e){a.props.onChange(e),a.setState({imageUrl:e,loading:!1})}),a.setState({fileList:e.fileList})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.handleCancel=function(){return a.setState({previewVisible:!1})},y(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m["Component"]),v(t,[{key:"render",value:function(){var e=d.a.createElement("div",{__source:{fileName:g,lineNumber:66}},d.a.createElement(u.default,{type:"plus",__source:{fileName:g,lineNumber:67}}),d.a.createElement("div",{className:"ant-upload-text",__source:{fileName:g,lineNumber:68}},"Upload")),t=this.state,n=t.previewVisible,a=t.previewImage,r=t.fileList;return d.a.createElement("div",{__source:{fileName:g,lineNumber:73}},d.a.createElement(N.default,{name:"avatar",listType:"picture-card",className:"avatar-uploader",beforeUpload:E,onPreview:this.handlePreview,onChange:this.handleChange,fileList:r,__source:{fileName:g,lineNumber:74}},r.length>=1?null:e),",",d.a.createElement(l.default,{visible:n,footer:null,onCancel:this.handleCancel,__source:{fileName:g,lineNumber:85}},d.a.createElement("img",{alt:"example",style:{width:"100%"},src:a,__source:{fileName:g,lineNumber:86}})))}}]),t}(),k=n(36),C=n.n(k),O=n(141),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x="/lwh/mycode/back-stage/src/pages/website/seo/index.jsx";function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=f.default.Item,P=function(e){var t=e.l,n=e.r,a=e.type,r=e.isEdit,i=e.tip,l=e.onChange,o=["logo","favicon"].includes(a),u=["title","name","tel","author","copyright"].includes(a);return d.a.createElement("div",{className:"row",__source:{fileName:x,lineNumber:19}},d.a.createElement("span",{className:"col-l",__source:{fileName:x,lineNumber:20}},t,"："),d.a.createElement("div",{className:"col-r",__source:{fileName:x,lineNumber:21}},r?o?d.a.createElement(w,{name:a,onChange:function(e){return l(a,e)},imageUrl:n,__source:{fileName:x,lineNumber:25}}):u?d.a.createElement(s.default,{onChange:function(e){return l(a,e)},defaultValue:n,placeholder:t,__source:{fileName:x,lineNumber:27}}):d.a.createElement(s.default.TextArea,{onChange:function(e){return l(a,e)},defaultValue:n,placeholder:t,autosize:{minRows:2,maxRows:6},__source:{fileName:x,lineNumber:28}}):o?d.a.createElement("span",{className:"image",__source:{fileName:x,lineNumber:31}},d.a.createElement("img",{src:n,__source:{fileName:x,lineNumber:31}})):n),r&&d.a.createElement("div",{className:"tip",__source:{fileName:x,lineNumber:34}},"*",i))},T=function(e){var t=e.links,n=e.onEditLinks,a=e.onDelete,r=e.isEdit;return d.a.createElement("div",{className:"row",__source:{fileName:x,lineNumber:40}},d.a.createElement("p",{className:"col-l",__source:{fileName:x,lineNumber:41}},"友情链接："),d.a.createElement("div",{className:"col-r",__source:{fileName:x,lineNumber:42}},t.map(function(e){return d.a.createElement(c.default,{key:e._id+"_"+e.name,closable:r,onClose:a,onClick:function(){return n("edit",e)},__source:{fileName:x,lineNumber:46}},e.name)}),r&&d.a.createElement(c.default,{onClick:function(){return n("add")},style:{background:"#fff",borderStyle:"dashed"},__source:{fileName:x,lineNumber:54}},d.a.createElement(u.default,{type:"plus",__source:{fileName:x,lineNumber:58}})," New Tag")))},U=f.default.create()(function(e){var t=e.form,n=e.isEdit,a=e.onClose,r=e.link,i=void 0===r?{}:r,l=e.onLinkSave,u={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},c=t.getFieldDecorator;return d.a.createElement(f.default,{onSubmit:function(e){e.preventDefault(),t.validateFields(function(e,t){e||(l(i._id||"",t),a())})},__source:{fileName:x,lineNumber:87}},d.a.createElement(I,j({},u,{label:"网站名称",__source:{fileName:x,lineNumber:88}}),c("name",{rules:[{required:!0,message:"链接呢称!"}],initialValue:i?i.name:""})(d.a.createElement(s.default,{disabled:!n,style:{width:250,marginLeft:20},placeholder:"链接呢称",__source:{fileName:x,lineNumber:96}}))),d.a.createElement(I,j({},u,{label:"网站地址",__source:{fileName:x,lineNumber:99}}),c("url",{rules:[{required:!0,message:"请输入网站地址!"}],initialValue:i?i.url:""})(d.a.createElement(s.default,{disabled:!n,style:{width:250,marginLeft:20},placeholder:"网站地址",__source:{fileName:x,lineNumber:107}}))),n&&d.a.createElement("div",{className:"submit-btn",__source:{fileName:x,lineNumber:110}},d.a.createElement(o.default,{htmlType:"submit",__source:{fileName:x,lineNumber:111}},i.name?"修 改":"添 加")))}),D=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=a=L(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={webInfo:{logo:C.a,favicon:C.a,title:"",keywords:"",description:"",author:"@",name:"",tel:"",address:"",copyright:"",links:[{url:"www.baidu.com",name:"百度"}]},isEdit:!1,loading:!1},a.getWebInfo=function(){a.setState({loading:!0}),Object(p.a)().then(function(e){a.setState({loading:!1,webInfo:e.data})}).catch(function(e){a.setState({loading:!1})})},a.onLinkSave=function(e,t){var n=a.state.webInfo,r=n.links.slice();if(e)r.map(function(n){return n.id===e?j({},n,t):n});else{if(r.filter(function(e){return e.name==t.name}).length>0)return void message.info("添加链接已存在！");r.push(j({},t))}a.setState({webInfo:j({},n,{links:r})})},a.onEditLinks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="add"===e,r=l.default.info({title:n?"添加链接":"链接编辑",iconType:"share-alt",okText:"取  消",width:500,className:"linksModal",content:d.a.createElement(U,{isEdit:a.state.isEdit,onClose:function(){!function(e){e.destroy()}(r)},link:t,onLinkSave:a.onLinkSave,__source:{fileName:x,lineNumber:205}})})},a.onDelete=function(e){var t=a.state.links.filter(function(t){return t.name!==e});a.setState({links:t})},a.onEdit=function(){a.setState({isEdit:!a.state.isEdit})},a.onChange=function(e,t){var n=["favicon","logo"].includes(e)?t:t.target.value;a.setState({webInfo:j({},a.state.webInfo,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n))})},a.onSave=function(){var e=a.state.webInfo;Object(p.d)({data:e}).then(function(e){console.log("更新网站基本数据",e)}),a.setState({isEdit:!1})},L(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m["Component"]),S(t,[{key:"componentDidMount",value:function(){this.getWebInfo()}},{key:"render",value:function(){var e=this,t=this.state,n=t.webInfo,l=t.isEdit,u=t.loading,c=n.links,s=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(n,["links"]);return d.a.createElement(a.default,{spinning:u,__source:{fileName:x,lineNumber:243}},d.a.createElement(_.a,{title:"基本设置",__source:{fileName:x,lineNumber:244}}),d.a.createElement("div",{className:O.style,__source:{fileName:x,lineNumber:245}},b.g.map(function(t){return d.a.createElement(P,{key:t.key,l:t.name,r:s[t.key],type:t.key,tip:t.tip,onChange:e.onChange,isEdit:l,__source:{fileName:x,lineNumber:248}})}),d.a.createElement(_.a,{title:"SEO设置",__source:{fileName:x,lineNumber:257}}),b.h.map(function(t){return d.a.createElement(P,{key:t.key,l:t.name,r:s[t.key],type:t.key,tip:t.tip,onChange:e.onChange,isEdit:l,__source:{fileName:x,lineNumber:260}})}),d.a.createElement(T,{isEdit:l,links:c,onEditLinks:this.onEditLinks,onDelete:this.onDelete,__source:{fileName:x,lineNumber:269}}),d.a.createElement(i.default,{__source:{fileName:x,lineNumber:270}}),d.a.createElement(o.default,{style:{margin:"0 20px"},type:"primary",onClick:this.onEdit,__source:{fileName:x,lineNumber:271}},l?"取  消":"编  辑"),l&&d.a.createElement(r.default,{placement:"top",title:"确认保存修改的信息吗？",onConfirm:this.onSave,okText:"保存",cancelText:"取消",__source:{fileName:x,lineNumber:274}},d.a.createElement(o.default,{type:"primary",__source:{fileName:x,lineNumber:275}},"保  存"))))}}]),t}();t.default=D}}]);